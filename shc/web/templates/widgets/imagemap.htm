{% from "buttons.inc.htm" import render_button %}
<div class="shc image-container">
    <img class="background" src="{{ image_url }}" />
    {% for x, y, item, sub_items in items %}
        <div class="item" style="left: {{ x*100 }}%; top: {{ y*100 }}%">
            {% if item is button %}
                {{ render_button(item, style='tiny compact circular icon' + (' with-popup' if sub_items else ''), disabled=False if sub_items else None) }}
            {% elif item is imageMapLabel %}
                <div class="ui {{ item.color }} small label {% if sub_items %}with-popup{% endif %}"
                     data-id="{{ item | id }}" data-widget="text-display"><i class="fitted notched circle loading icon"></i></div>
            {% endif %}
            {% if sub_items %}
                <div class="ui fixed very wide popup">
                    <div class="ui relaxed divided list">
                        {% for sub_item in sub_items %}
                            <div class="item">{{ sub_item.render()|safe }}</div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        </div>
    {% endfor %}
</div>
